# ğŸ“‹ Vuex ì‹œì‘ (3) - Actions

Vuexì˜ ë§ˆì§€ë§‰ ë¶€ë¶„ì¸ Actions!

<br>

## Actions ë€?

Mutations ì—ëŠ” ìˆœì°¨ì ì¸ ë¡œì§ë“¤ë§Œ ì„ ì–¸í•˜ê³  Actions ì—ëŠ” ë¹„ ìˆœì°¨ì  ë˜ëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ ë¡œì§ë“¤ì„ ì„ ì–¸í•œë‹¤.

ê·¸ë ‡ë‹¤ë©´ ì™œ ì²˜ë¦¬ ë¡œì§ì˜ ì„±ê²©ì— ë”°ë¼ Mutations ì™€ Actions ë¡œ ë‚˜ëˆ  ë“±ë¡ì„ í•´ì•¼í• ê¹Œ?

<br>

* **Mutations ì˜ ì—­í• ì€ State ê´€ë¦¬**ì— ì´ˆì ì„ ë‘ê³  ìˆë‹¤.
* => í•œ ë°ì´í„°ì— ëŒ€í•´ ì—¬ëŸ¬ ê°œì˜ ì»´í¬ë„ŒíŠ¸ê°€ ì ‘ê·¼í•  ë•Œ, ì–´ëŠ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì ‘ê·¼í–ˆëŠ”ì§€ë¥¼ ì•Œê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤ê³  ë°°ì› ë‹¤.
* ìƒíƒœ ê´€ë¦¬ ìì²´ê°€ í•œ ë°ì´í„°ì— ëŒ€í•´ ì—¬ëŸ¬ ê°œì˜ ì»´í¬ë„ŒíŠ¸ê°€ ê´€ì—¬í•˜ëŠ” ê²ƒì„ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•¨ì¸ë° Mutations ì— ë¹„ë™ê¸° ì²˜ë¦¬ ë¡œì§ë“¤ì´ í¬í•¨ë˜ë©´ **ê°™ì€ ê°’ì— ëŒ€í•´ ì—¬ëŸ¬ ê°œì˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë³€ê²½ì„ ìš”ì²­í–ˆì„ ë•Œ, ê·¸ ë³€ê²½ ìˆœì„œ íŒŒì•…ì´ ì–´ë µê¸° ë•Œë¬¸**ì´ë‹¤.

##### ì´ëŸ¬í•œ ë¬¸ì œë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ë¹„ë™ê¸° ì²˜ë¦¬ ë¡œì§ì€ Actions ì—, ë™ê¸° ì²˜ë¦¬ ë¡œì§ì€ Mutations ì— ë‚˜ëˆ  êµ¬í˜„í•œë‹¤.

<br>

ë”°ë¼ì„œ, `setTimeout()` ì´ë‚˜ ì„œë²„ì™€ì˜ http í†µì‹  ì²˜ë¦¬ ê°™ì´ ê²°ê³¼ë¥¼ ë°›ì•„ì˜¬ íƒ€ì´ë°ì´ ì˜ˆì¸¡ë˜ì§€ ì•Šì€ ë¡œì§ì€ Actions ì— ì„ ì–¸í•œë‹¤.

<br>

##### :pushpin:Tip! ë™ê¸° ì²˜ë¦¬(Mutations) vs. ë¹„ë™ê¸° ì²˜ë¦¬(Actions)

> Mutations ì†ì„±ì—ëŠ” state ê°’ì˜ ë³€í™”ë¥¼ ì¶”ì í•˜ê¸° ì–´ë µê¸° ë•Œë¬¸ì— ë™ê¸° ì²˜ë¦¬ ë¡œì§ë§Œ ì„ ì–¸í•´ì£¼ê³ , 
>
> state í˜¸ì¶œ, ë³€ê²½ í™•ì¸ì´ ì‰¬ìš´ Actions ì—ëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ ë¡œì§ì„ ì„ ì–¸í•´ì¤€ë‹¤.

<br>

## Actions ë“±ë¡

Vuexì— Actionsë¥¼ ë“±ë¡í•˜ëŠ” ë°©ë²•ì€ Stateë‚˜ Mutations, Getters ì™€ ìœ ì‚¬í•˜ë‹¤. 

```js
// store.js
export const store = new Vuex.Store({
  // ...
  mutations: {
    addCounter: function (state, payload) {
      return state.counter++;
    }
  },
  actions: {
    addCounter: function (context) {
      // commit ì˜ ëŒ€ìƒì¸ addCounter ëŠ” mutations ì˜ ë©”ì„œë“œë¥¼ ì˜ë¯¸í•œë‹¤.
      return context.commit('addCounter');
    }
  }
});
```

ìƒíƒœê°€ ë³€í™”í•˜ëŠ” ê±¸ ì¶”ì í•˜ê¸° ìœ„í•´ **actionsëŠ” ê²°êµ­ mutationsì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œ(commit)í•˜ëŠ” êµ¬ì¡°**ê°€ ëœë‹¤. 

```js
// store.js
export const store = new Vuex.Store({
  actions: {
    getServerData: function (context) {
      return axios.get("sample.json").then(function() {
        // ...
      });
    },
    delayFewMinutes: function (context) {
      return setTimeout(function () {
        commit('addCounter');
      }, 1000);
    }
  }
});
```

ìœ„ì²˜ëŸ¼ **HTTP get ìš”ì²­ì´ë‚˜ setTimeout ê³¼ ê°™ì€ ë¹„ë™ê¸° ì²˜ë¦¬ ë¡œì§**ë“¤ì€ **actions ì— ì„ ì–¸**í•´ì¤€ë‹¤.

<br>

## Actions ì‚¬ìš©

Actionsë¥¼ ì´ìš©í•´ì„œ counterë¥¼ í•˜ë‚˜ì”© ëŠ˜ë ¤ë³´ì.

Actionsë¥¼ í˜¸ì¶œí•  ë•ŒëŠ” **dispatch()** ë¥¼ ì´ìš©í•œë‹¤. (MutationsëŠ” **commit()** ì‚¬ìš©)

```js
// App.vue
methods: {
  // Mutations ë¥¼ ì´ìš©í•  ë•Œ
  addCounter() {
    this.$store.commit('addCounter');
  }
  // Actions ë¥¼ ì´ìš©í•  ë•Œ
  addCounter() {
    this.$store.dispatch('addCounter');
  }
},
```

ì „ì²´ êµ¬ì¡°ë„ì—ì„œ **dispatch** ì˜ ë™ì‘ì„ ë³´ë©´,

<img src="https://user-images.githubusercontent.com/19389288/92506887-16f25e00-f241-11ea-8406-b199254e40d1.jpg" width="70%">

> * App.vueì—ì„œ addCounter ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ê³ , Vuexì˜ Actionsì— dispatchë¥¼ í•œë‹¤.
>
> * dispatchë¥¼ ë°›ì€ ActionsëŠ” Mutations ì— commit ì„ í•˜ê³ ,
> * Mutations ì— ì •ì˜ë˜ì–´ ìˆëŠ” ë©”ì„œë“œê°€ í˜¸ì¶œë˜ì–´ Vuexì˜ Stateë¥¼ ë³€ê²½ì‹œí‚¨ë‹¤.

ìœ„ì™€ ê°™ì€ íë¦„ìœ¼ë¡œ ìƒíƒœ ê´€ë¦¬ë¥¼ í•˜ê²Œ ë˜ë©´, ì–´ëŠ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì–´ë–¤ ìˆœì„œë¡œ Stateì— ì ‘ê·¼í•˜ê³  ë³€ê²½í–ˆëŠ”ì§€ë¥¼ ì•Œ ìˆ˜ ìˆê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.

<br>

## Actions ì— ì¸ì ê°’ ë„˜ê¸°ê¸°

Mutationsì™€ ìœ ì‚¬í•˜ë‹¤.

```js
<!-- by ì™€ duration ë“±ì˜ ì—¬ëŸ¬ ì¸ì ê°’ì„ ë„˜ê¸¸ ê²½ìš°, ê°ì²´ì•ˆì— key - value í˜•íƒœë¡œ ì—¬ëŸ¬ ê°’ì„ ë„˜ê¸¸ ìˆ˜ ìˆë‹¤ -->
<button @click="asyncIncrement({ by: 50, duration: 500 })">Increment</button>
```

```js
export const store = new Vuex.Store({
  actions: {
    // payload ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì¸ì ëª…
    asyncIncrement: function (context, payload) {
      return setTimeout(function () {
        context.commit('increment', payload.by);
      }, payload.duration);
    }
  }
})
```

<br>

## mapActions

```js
import {mapActions} from 'vuex';

export default {
  methods: {
    ...mapActions([
      'asyncIncrement',
      'asyncDecrement'
    ])
  },
}
```

<br>

<br>

------



ğŸ“” **REFERENCE**: [ìº¡í‹´íŒêµ] https://joshua1988.github.io/web-development/vuejs/vuex-actions-modules/



