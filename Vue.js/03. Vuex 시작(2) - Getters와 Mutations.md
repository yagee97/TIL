# ğŸ“‹ Vuex ì‹œì‘ (2) - Gettersì™€ Mutations

:pencil2:ì§€ë‚œ ê¸€: 

[Vuex ]: https://github.com/yagee97/TIL/blob/master/Vue.js/02.%20Vuex%20%EC%8B%9C%EC%9E%91(1)%20-%20State.md	"Vuex ì‹œì‘ (1) - State"

<br>

ì§€ë‚œ ê¸€ì— ì´ì–´ Vuexì˜ ê¸°ë³¸ì¸ Gettersì™€ Mutationsë¥¼ ë°°ì›Œë³´ì!

<br>

## Getters ë€?

**ì¤‘ì•™ ë°ì´í„° ê´€ë¦¬ì‹ êµ¬ì¡°(Vuex)**ì—ì„œ ë°œìƒí•˜ëŠ” ë¬¸ì œì  ì¤‘ í•˜ë‚˜ëŠ” ê° ì»´í¬ë„ŒíŠ¸ì—ì„œ Vuexì˜ ë°ì´í„°ë¥¼ ì ‘ê·¼í•  ë•Œ ì¤‘ë³µëœ ì½”ë“œë¥¼ **ë°˜ë³µ í˜¸ì¶œ**í•˜ê²Œ ë˜ëŠ” ê²ƒì´ë‹¤. 

ì˜ˆë¥¼ ë“¤ì–´, ì•„ë˜ì™€ ê°™ì€ ì½”ë“œê°€ ìˆë‹¤.

```js
// App.vue
computed: {
  doubleCounter() {
    return this.$store.state.counter * 2;
  }
},

// Child.vue
computed: {
  doubleCounter() {
    return this.$store.state.counter * 2;
  }
},
```

App.vueì™€ Child.vue ë“± ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ ê°™ì€ ë¡œì§ì„ ì¤‘ë³µ ì‚¬ìš©í•˜ê³  ìˆë‹¤. ì´ ë•Œ**, Vuexì˜ ë°ì´í„°(state) ë³€ê²½ì„ ê° ì»´í¬ë„ŒíŠ¸ì—ì„œ ìˆ˜í–‰í•˜ëŠ” ê²Œ ì•„ë‹ˆë¼, Vuexì—ì„œ ìˆ˜í–‰í•˜ë„ë¡ í•˜ê³ **, **ê° ì»´í¬ë„ŒíŠ¸ì—ì„œ ìˆ˜í–‰ ë¡œì§ì„ í˜¸ì¶œ**í•˜ë©´, ê°€ë…ì„±ë„ ì˜¬ë¼ê°€ê³  ì„±ëŠ¥ë©´ì—ì„œë„ ì´ì ì´ ìƒê¸´ë‹¤.

<br>

```js
// store.js (Vuex)
getters: {
  doubleCounter: function (state) {
    return state.counter * 2;
  }
},

// App.vue
computed: {
  doubleCounter() {
    return this.$store.getters.doubleCounter;
  }
},

// Child.vue
computed: {
  doubleCounter() {
    return this.$store.getters.doubleCounter;
  }
},
```

<br>

<img src="https://user-images.githubusercontent.com/19389288/92451701-0cf83d00-f1f8-11ea-8063-366b46de7371.jpg" width="70%">



<br>

## Getters ë“±ë¡ì„ ìœ„í•œ ì½”ë“œ ì •ë¦¬

[ì§€ë‚œ íŠœí† ë¦¬ì–¼]: https://github.com/yagee97/TIL/blob/master/Vue.js/02.%20Vuex%20%EC%8B%9C%EC%9E%91(1)%20-%20State.md	"ì§€ë‚œ íŠœí† ë¦¬ì–¼"

ì— ì´ì–´ì„œ gettersë¥¼ ì¶”ê°€í•´ë³´ì.

* ì§€ë‚œë²ˆ ì½”ë“œì—ì„œ ì •ë¦¬í•´ì•¼ í•˜ëŠ” ë¶€ë¶„ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

  ```js
  <!-- App.vue -->
  <div id="app">
    Parent counter : {{ this.$store.state.counter }}
    <!-- ... -->
  </div>
  ```

  Vue ê³µì‹ì‚¬ì´íŠ¸ì—ì„œ ì–¸ê¸‰ëœ ê²ƒì²˜ëŸ¼ `Template`ì˜ í‘œí˜„ì‹ì€ ìµœëŒ€í•œ ê°„ì†Œí™”í•´ì•¼ í•œë‹¤.

  ë”°ë¼ì„œ,

  ```js
  <!-- App.vue -->
  <div id="app">
    Parent counter : {{ parentCounter }}
    <!-- ... -->
  </div>
  
  <!-- Child.vue -->
  <div>
    Child counter : {{ childCounter }}
    <!-- ... -->
  </div>
  ```

  ```js
  // App.vue
  computed: {
    parentCounter() {
      return this.$store.state.counter;
    }
  },
  
  // Child.vue
  computed: {
    childCounter() {
      return this.$store.state.counter;
    }
  },
  ```

  computed ì†ì„±ì„ í™œìš©í•¨ìœ¼ë¡œì¨ Template ì½”ë“œê°€ ë” ê°„ê²°í•´ì§€ê³ , ê°€ë…ì„±ì´ ì¢‹ì•„ì¡Œë‹¤.

  ***computed ì†ì„±ì´ë€?**

  > computed ì†ì„±ì˜ ëŒ€ìƒìœ¼ë¡œ ì •í•œ data ì†ì„±ì´ ë³€í–ˆì„ ë•Œ ì´ë¥¼ ê°ì§€í•˜ê³  ìë™ìœ¼ë¡œ ë‹¤ì‹œ ì—°ì‚°í•´ì¤€ë‹¤.
  >
  > * computed ì†ì„±ì€ ì¸ìë¥¼ ë°›ì§€ ì•ŠëŠ”ë‹¤.
  > * HTTP í†µì‹ ê³¼ ê°™ì´ ì»´í“¨íŒ… ë¦¬ì†ŒìŠ¤ê°€ ë§ì´ í•„ìš”í•œ ë¡œì§ì„ ì •ì˜í•˜ì§€ ì•ŠëŠ”ë‹¤.

<br>

## Getters ë“±ë¡ 

* gettersë¥¼ Vuexì— ì¶”ê°€í•œë‹¤.

```js
// store.js
import Vue from "vue";
import Vuex from "vuex";

Vue.use(Vuex);

export const store = new Vuex.Store({
    state: {
        counter: 0
    },
    // getCounter ë¼ëŠ” gettersë¥¼ ì¶”ê°€
    getters: {
        getCounter: function(state) {
            return state.counter;
        }
    }
});
```

<br>

## Getters ì‚¬ìš©

ë“±ë¡ëœ gettersë¥¼ ê° ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•˜ë ¤ë©´ this.$storeë¥¼ ì´ìš©í•˜ì—¬ gettersì— ì ‘ê·¼í•œë‹¤.

```js
// App.vue
computed: {
  parentCounter() {
    this.$store.getters.getCounter;
  }
},

// Child.vue
computed: {
  childCounter() {
    this.$store.getters.getCounter;
  }
},
```

<br>

## mapGetters

Vuexì— ë‚´ì¥ëœ helperí•¨ìˆ˜, mapGettersë¡œ ì´ë¯¸ ìœ„ì—ì„œ í•œë²ˆ ê°€ë…ì„±ì´ ì˜¬ë¼ê°„ ì½”ë“œë¥¼ ë” ì§ê´€ì ì´ê²Œ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.

```js
<!-- App.vue -->
<div id="app">
  Parent counter : {{ parentCounter }}
  <!-- ... -->
</div>
```

```js
// App.vue
import { mapGetters } from 'vuex'

// ...
computed: mapGetters({
  parentCounter : 'getCounter' // getCounter ëŠ” Vuex ì˜ getters ì— ì„ ì–¸ëœ ì†ì„± ì´ë¦„
}),
```

ë˜ëŠ”, ì•„ë˜ì™€ ê°™ì´ ê°„ë‹¨í•˜ê²Œ ì„ ì–¸í•  ìˆ˜ë„ ìˆë‹¤.

```js
<!-- App.vue -->
<div id="app">
  Parent counter : {{ getCounter }}
  <!-- ... -->
</div>
```

```js
// App.vue
import { mapGetters } from 'vuex'

computed: mapGetters([
  'getCounter'
]),
```

<br>

## Mutaions ë€?

Mutations ë€, Vuexì˜ ë°ì´í„° ì¦‰ **stateì˜ ê°’ì„ ë³€ê²½í•˜ëŠ” ë¡œì§**ë“¤ì„ ì˜ë¯¸í•œë‹¤.

**Gettersì™€ì˜ ì°¨ì´ì **ì€

1. ì¸ìë¥¼ ë°›ì•„ Vuexì— ë„˜ê²¨ì¤„ ìˆ˜ ìˆê³ 
2. computedê°€ ì•„ë‹Œ methodsì— ë“±ë¡í•œë‹¤.

ë˜í•œ**, Actions ì™€ì˜ ì°¨ì´ì **ì€

1. Mutations ëŠ” **ë™ê¸°ì  ë¡œì§**ì„ ì •ì˜
2. Actions ëŠ” ë¹„ë™ê¸°ì  ë¡œì§ì„ ì •ì˜

<br>

**Mutations ì˜ ì„±ê²©ìƒ ì•ˆì— ì •ì˜í•œ ë¡œì§ë“¤ì´ "ìˆœì°¨ì "ìœ¼ë¡œ ì¼ì–´ë‚˜ì•¼ ê° ì»´í¬ë„ŒíŠ¸ì˜ ë°˜ì˜ ì—¬ë¶€ë¥¼ ì œëŒ€ë¡œ ì¶”ì í•  ìˆ˜ê°€ ìˆê¸° ë•Œë¬¸ì´ë‹¤.**

<br>

ì§€ê¸ˆê¹Œì§€ counterë¥¼ ë³€ê²½í• ë•Œ ì•„ë˜ì™€ ê°™ì´ ì§ì ‘ stateì— ì ‘ê·¼í•˜ì—¬ ë³€ê²½í•˜ì˜€ë‹¤.

```js
return this.$store.state.counter++;
return this.$store.state.counter;
```

í•˜ì§€ë§Œ, ì´ ë°©ì‹ì€ ì•ˆí‹°íŒ¨í„´ìœ¼ë¡œì¨ Vueì˜ ìƒíƒœê´€ë¦¬ íŒ¨í„´ì— ë§ì§€ ì•ŠëŠ” ë°©ì‹ì´ë‹¤.

**ì•ˆí‹°íŒ¨í„´ì¸ ì´ìœ **ëŠ” ì—¬ëŸ¬ ê°œì˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ ê°™ì€ state ê°’ì„ ë™ì‹œì— ì œì–´í•˜ê²Œ ë˜ë©´, **state ê°’ì´ ì–´ëŠ ì»´í¬ë„ŒíŠ¸ì—ì„œ í˜¸ì¶œí•´ì„œ ë³€ê²½ëœê±´ì§€ ì¶”ì í•˜ê¸° ì–´ë µê¸° ë•Œë¬¸ì´ë‹¤.**

í•˜ì§€ë§Œ, ìƒíƒœë³€í™”ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ìˆ˜í–‰í•¨ìœ¼ë¡œì¨ í…ŒìŠ¤íŒ…, ë””ë²„ê¹…, Vueì˜ Reactive ì„±ì§ˆ ì¤€ìˆ˜ì˜ í˜œíƒì„ ì–»ëŠ”ë‹¤.

<br>

ì•„ë˜ì™€ ê°™ì´ `commit`ì„ ì´ìš©í•˜ì—¬ stateë¥¼ ë³€ê²½í•œë‹¤.

<img src="https://user-images.githubusercontent.com/19389288/92469706-3cb33f00-f210-11ea-8c9c-29aad6140bbe.jpg" width="50%">

##### :pushpin:Tip!

* **Mutations** ê°€ ë‚¯ì„¤ë‹¤ë©´ ê¸°ì–µí•˜ê¸° ì‰½ê²Œ **Setters** ë¡œ ì´í•´í•  ìˆ˜ ìˆë‹¤.

<br>

## Mutations ë“±ë¡

gettersì™€ ë§ˆì°¬ê°€ì§€ë¡œ Vuex ì— mutations ì†ì„±ì„ ì¶”ê°€í•œë‹¤.

```js
// store.js
export const store = new Vuex.Store({
  // ...
  mutations: {
    addCounter: function (state, payload) {
      return state.counter++;
    }
  }
});
```

<br>

## Mutations ì‚¬ìš©

App.vueì˜ ê¸°ì¡´ ì½”ë“œëŠ” addCounterì—ì„œ stateì˜ counter ê°’ì„ ë°”ë¡œ ì ‘ê·¼í•˜ì—¬ 1ì„ ë”í•˜ëŠ” ì½”ë“œì˜€ë‹¤.

stateë¥¼ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì§ì ‘ ì ‘ê·¼í•˜ì—¬ ì¦ê°€ì‹œí‚¤ëŠ” ë¶€ë¶„ì„ mutations ë¥¼ ì´ìš©í•˜ëŠ” ì½”ë“œë¡œ ë°”ê¾¸ì.

```js
<!-- App.vue(parent) -->
!<template>
  <div id="app">
    Parent counter : {{ parentCounter }} <br>
    <button @click="addCounter">+</button>
    <button @click="subCounter">-</button>
   <child></child> 
  </div>
</template>

<script>
import Child from "./Child.vue";
import { mapGetters } from 'vuex';

export default {
  components: {
    child : Child
  },

  computed: mapGetters({
    parentCounter : 'getCounter'
  }),

  methods: {
    addCounter(){
      // this.$store.state.counter++;
      // commitì„ ì´ìš©í•˜ì—¬ mutations ì´ë²¤íŠ¸ë¥¼ í˜¸ì¶œí•´ì•¼í•œë‹¤.
      this.$store.commit('addCounter'); 
    }
  }
};
</script>
```

<br>

## Mutations ì— ì¸ì ê°’ ë„˜ê¸°ê¸°

**ê° ì»´í¬ë„ŒíŠ¸ì—ì„œ Vuex ì˜ stateë¥¼ ì¡°ì‘í•˜ëŠ”ë° í•„ìš”í•œ íŠ¹ì • ê°’ë“¤ì„ ë„˜ê¸°ê³  ì‹¶ì„ ë•Œ**ëŠ” `commit()` ì— ë‘ë²ˆì§¸ ì¸ìë¥¼ ì¶”ê°€í•œë‹¤.

```js
this.$store.commit('addCounter', 10);
this.$store.commit('addCounter', {
  value: 10,
  arr: ["a", "b", "c"]
});
```

ì´ë¥¼ Vuex ì—ì„œ ì•„ë˜ì™€ ê°™ì´ ë°›ì„ ìˆ˜ ìˆë‹¤.

```js
mutations: {
  // payload ê°€ { value : 10 } ì¼ ê²½ìš°
  addCounter: function (state, payload) {
    state.counter = payload.value;
  }
}
```

<br>

## mapMutations

mapGettersì™€ ë§ˆì°¬ê°€ì§€ë¡œ, Vuex ì— ë‚´ì¥ëœ mapMutations ë¥¼ ì´ìš©í•˜ì—¬ ì½”ë“œ ê°€ë…ì„±ì„ ë†’ì¼ ìˆ˜ ìˆë‹¤.

```js
// App.vue
import { mapMutations } from 'vuex'

methods: {
  // Vuex ì˜ Mutations ë©”ì„œë“œ ëª…ê³¼ App.vue ë©”ì„œë“œ ëª…ì´ ë™ì¼í•  ë•Œ [] ì‚¬ìš©
  ...mapMutations([
    'addCounter'
  ]),
  // Vuex ì˜ Mutations ë©”ì„œë“œ ëª…ê³¼ App.vue ë©”ì„œë“œ ëª…ì„ ë‹¤ë¥´ê²Œ ë§¤ì¹­í•  ë•Œ {} ì‚¬ìš©
  ...mapMutations({
    addCounter: 'addCounter' // ì• addCounter ëŠ” í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ì˜ ë©”ì„œë“œë¥¼, ë’¤ addCounter ëŠ” Vuex ì˜ Mutations ë¥¼ ì˜ë¯¸
  })
}
```

<br>

<br>

<hr>

<br>

ğŸ“” **REFERENCE**: [ìº¡í‹´íŒêµ] https://joshua1988.github.io/web-development/vuejs/vuex-getters-mutations/









